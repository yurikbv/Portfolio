"use strict";!function(){localStorage.getItem("theme")?document.body.className=localStorage.getItem("theme"):document.body.className="mountains";var e=document.querySelector(".change__container");e&&e.addEventListener("click",function(e){if(e.preventDefault(),e.target.closest(".change__theme-item")){var t=e.target.closest(".change__theme-item").dataset.theme;console.log(t),localStorage.setItem("theme",t),location.reload()}})}(),function(){var a,t,e;a=document.querySelector(".parallax-mount"),t=a.querySelectorAll(".parallax-mount__layer"),e=function(e){var i=a.clientWidth/2-e.pageX,c=a.clientHeight/2-e.pageY;Array.from(t).forEach(function(e,t){var n=t/100,r=i*n,o=c*n;e.style.bottom="-"+a.clientHeight/2*n+"px",e.style.transform="translate3d("+r+"px, "+o+"px, 0)"})},document.querySelector(".auth-container")?document.querySelector(".auth-container").addEventListener("mousemove",e):document.querySelector(".hero").addEventListener("mousemove",e)}(),document.addEventListener("DOMContentLoaded",function(){var e,o=0,r=document.querySelector(".preloader"),t=Array.from(document.body.querySelectorAll("*")).filter(function(e){return e.hasAttribute("background-image")?e:"img"===e.tagName.toLowerCase()?e:void 0}).map(function(e){return e.hasAttribute("background-image")?e.getAttribute("background-image"):"img"===e.tagName.toLowerCase()?e.getAttribute("src"):void 0}),i=function(e,t){var n=Math.ceil(t/e*100);r.querySelector(".preloader__percents").textContent=n+"%",100<=n&&(r.style.display="none")};(e=t).length||(r.style.display="none"),e.forEach(function(e,t,n){var r=document.createElement("img");r.setAttribute("src",e),r.addEventListener("load",function(){o++,i(n.length,o)}),r.addEventListener("error",function(){o++,i(n.length,o)})})}),function(){if(document.querySelector(".slider")){document.addEventListener("DOMContentLoaded",function(){var d=!1,e=function(e,t,n){var r,o,i=e.querySelectorAll(".slider-btn__item"),c=Array.from(i).filter(function(e){return!e.classList.contains("slider-btn__item--active")}),a=e.querySelector(".slider-btn__item--active");r=c,o=t="down"===t?100:-100,Array.from(r).forEach(function(e){return e.style.top=-o+"%"});var l=Array.from(i).findIndex(function(e){return e.classList.contains("slider-btn__item--active")});"next"===n?++l>=i.length&&(l=0):--l<0&&(l=i.length-1);var s=i[l];a.style.transition="all 300ms linear",s.style.transition="all 300ms linear",a.style.top=t+"%",s.style.top=0,setTimeout(function(){a.style.transition="",s.style.transition="",a.classList.remove("slider-btn__item--active"),a.style.top=-t+"%",s.classList.add("slider-btn__item--active"),d=!1},300)},t=function(e,t){var n=e.querySelectorAll(".slideshow__link"),r=document.querySelectorAll(".slider__desc--item"),o=Array.from(n).findIndex(function(e){return e.classList.contains("slideshow__link--active")}),i=e.querySelector(".slideshow__link--active"),c=document.querySelector(".slider__desc--active");"next"===t?++o>=n.length&&(o=0):--o<0&&(o=n.length-1);var a=n[o],l=r[o];i.style.opacity=0,c.style.opacity=0,setTimeout(function(){i.style.display="none",c.style.display="none",i.style.opacity="",c.style.opacity="",i.classList.remove("slideshow__link--active"),c.classList.remove("slider__desc--active"),a.style.display="block",l.style.display="block",a.classList.add("slideshow__link--active"),l.classList.add("slider__desc--active")},300)},n=function(){d||(d=!0,e(document.querySelector(".slider__btn--next"),"down","next"),e(document.querySelector(".slider__btn--prev"),"up","next"),t(document.querySelector(".slideshow__display"),"next"))},r=function(){d||(d=!0,e(document.querySelector(".slider__btn--next"),"up","prev"),e(document.querySelector(".slider__btn--prev"),"down","prev"),t(document.querySelector(".slideshow__display"),"prev"))};document.querySelector(".shadow__next").addEventListener("click",n),document.querySelector(".slider__arrow--next").addEventListener("click",n),document.querySelector(".shadow__prev").addEventListener("click",r),document.querySelector(".slider__arrow--prev").addEventListener("click",r)})}}(),function(){if(document.querySelector(".hamburger")){var e=document.querySelector(".hamburger"),t=function(){e.classList.add("hamburger__opened"),window.addEventListener("keydown",r),e.addEventListener("keydown",o)},n=function(){e.classList.remove("hamburger__opened"),window.removeEventListener("keydown",r)},r=function(e){"Escape"===e.code&&n()},o=function(){"Enter"===event.code&&e.classList.contains("hamburger__opened")?n():"Enter"===event.code&&t()};e.addEventListener("click",function(){e.classList.contains("hamburger__opened")?n():t()}),e.addEventListener("keydown",o)}}(),function(){if(document.querySelector(".auth")){var t=document.querySelector(".auth"),e=document.querySelector(".auth__login--link"),n=document.querySelector(".auth__btn--back"),r=function(e){e.preventDefault(),t.classList.toggle("auth__flip")};e.addEventListener("click",r),n.addEventListener("click",r)}}(),function(){if(document.querySelector(".skills")){var e=document.querySelectorAll("[data-animation]"),t=function(){Array.from(e).forEach(function(e){if(e.getBoundingClientRect().y-document.documentElement.offsetHeight+30<0){var t=e.dataset.animation;e.classList.add(t)}})};document.addEventListener("scroll",t),document.addEventListener("wheel",t),document.addEventListener("touchmove",t)}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYW5nZVRoZW1lLmpzIiwiY29tbW9uLmpzIiwicHJlbG9hZGVyLmpzIiwic2xpZGVyLmpzIiwiaGFtYnVyZ2VyLmpzIiwiZmxpcC5qcyIsIkFjdGlvbkJ5U2Nyb2xsLmpzIl0sIm5hbWVzIjpbImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJkb2N1bWVudCIsImJvZHkiLCJjbGFzc05hbWUiLCJjaGFuZ2UiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwidmFsdWUiLCJkYXRhc2V0IiwidGhlbWUiLCJjb25zb2xlIiwibG9nIiwic2V0SXRlbSIsImxvY2F0aW9uIiwicmVsb2FkIiwicGFyYWxsYXhDb250YWluZXIiLCJsYXllcnMiLCJtb3ZlTGF5ZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZSIsImluaXRpYWxYIiwiY2xpZW50V2lkdGgiLCJwYWdlWCIsImluaXRpYWxZIiwiY2xpZW50SGVpZ2h0IiwicGFnZVkiLCJBcnJheSIsImZyb20iLCJmb3JFYWNoIiwibGF5ZXIiLCJpIiwiZGV2aWRlciIsInBvc2l0aW9uWCIsInBvc2l0aW9uWSIsInN0eWxlIiwiYm90dG9tIiwidHJhbnNmb3JtIiwiaW1hZ2VzIiwicGVyY2VudHNUb3RhbCIsInByZWxvYWRlciIsImltZ1BhdGgiLCJmaWx0ZXIiLCJlbCIsImhhc0F0dHJpYnV0ZSIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsIm1hcCIsImVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJzZXRQZXJjZW50IiwidG90YWwiLCJjdXJyZW50IiwicGVyY2VudHMiLCJNYXRoIiwiY2VpbCIsInRleHRDb250ZW50IiwiZGlzcGxheSIsImxlbmd0aCIsImltZyIsImZha2VJbWFnZSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJpblByb2Nlc3MiLCJtb3ZlU2xpZGVyIiwiY29udGFpbmVyIiwiZGlyZWN0aW9uIiwibmV4dFByZXYiLCJpdGVtcyIsInVuQWN0aXZlSXRlbXMiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImFjdGl2ZUl0ZW0iLCJ0b3AiLCJjb3VudGVyIiwiZmluZEluZGV4IiwicmVxSXRlbSIsInRyYW5zaXRpb24iLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwiYWRkIiwibW92ZVNsaWRlU2hvdyIsIml0ZW1zSW5mbyIsImFjdGl2ZUluZGV4IiwiYWN0aXZlSXRlbUluZm8iLCJyZXFJdGVtSW5mbyIsIm9wYWNpdHkiLCJzdGFydFNsaWRlck5leHQiLCJzdGFydFNsaWRlclByZXYiLCJtZW51TW9iaWxlIiwib3Blbk1lbnUiLCJ3aW5kb3ciLCJvbkVzY1ByZXNzIiwib25FbnRlclByZXNzIiwiY2xvc2VNZW51IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvZGUiLCJidXR0b24iLCJidXR0b25TZWNvbmQiLCJkb1RvZ2dsZSIsInRvZ2dsZSIsInN0YXJ0QW5pbWF0ZSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInkiLCJkb2N1bWVudEVsZW1lbnQiLCJvZmZzZXRIZWlnaHQiLCJhbmltYXRpb24iXSwibWFwcGluZ3MiOiJjQUFBLFdBQ0tBLGFBQWFDLFFBQVEsU0FDdEJDLFNBQVNDLEtBQUtDLFVBQVlKLGFBQWFDLFFBQVEsU0FDMUNDLFNBQVNDLEtBQUtDLFVBQVksWUFFakMsSUFBSUMsRUFBU0gsU0FBU0ksY0FBYyxzQkFFakNELEdBQ0RBLEVBQU9FLGlCQUFpQixRQUFTLFNBQVVDLEdBRXpDLEdBREFBLEVBQU1DLGlCQUNIRCxFQUFNRSxPQUFPQyxRQUFRLHVCQUF1QixDQUM3QyxJQUFJQyxFQUFRSixFQUFNRSxPQUFPQyxRQUFRLHVCQUF1QkUsUUFBUUMsTUFDaEVDLFFBQVFDLElBQUlKLEdBQ1paLGFBQWFpQixRQUFRLFFBQVFMLEdBQzdCTSxTQUFTQyxZQWRqQixHQ0FBLFdBRUUsSUFDTUMsRUFDRkMsRUFFRUMsRUFIQUYsRUFBb0JsQixTQUFTSSxjQUFjLG1CQUM3Q2UsRUFBU0QsRUFBa0JHLGlC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LFNBQVNJLGNBQWMsU0FDbkMrRixFQUFTbkcsU0FBU0ksY0FBYyxzQkFDaENnRyxFQUFlcEcsU0FBU0ksY0FBYyxvQkFFdENpRyxFQUFXLFNBQUMvRSxHQUNkQSxFQUFFZixpQkFDRjRELEVBQVVLLFVBQVU4QixPQUFPLGVBRzdCSCxFQUFPOUYsaUJBQWlCLFFBQVFnRyxHQUNoQ0QsRUFBYS9GLGlCQUFpQixRQUFRZ0csSUFaMUMsR0NBQSxXQUNFLEdBQUdyRyxTQUFTSSxjQUFjLFdBQVcsQ0FDbkMsSUFBSWtFLEVBQVF0RSxTQUFTcUIsaUJBQWlCLG9CQUVsQ2tGLEVBQWUsV0FDakIxRSxNQUFNQyxLQUFLd0MsR0FBT3ZDLFFBQVEsU0FBQ2MsR0FDekIsR0FBSUEsRUFBRzJELHdCQUF3QkMsRUFBSXpHLFNBQVMwRyxnQkFBZ0JDLGFBQWUsR0FBTSxFQUFFLENBQ2pGLElBQUl6RyxFQUFZMkMsRUFBR2xDLFFBQVFpRyxVQUMzQi9ELEVBQUcyQixVQUFVVSxJQUFJaEYsT0FNckJGLFNBQVNLLGlCQUFpQixTQUFTa0csR0FDbkN2RyxTQUFTSyxpQkFBaUIsUUFBUWtHLEdBQ2xDdkcsU0FBU0ssaUJBQWlCLFlBQVlrRyxJQWhCNUMiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xyXG4gIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0aGVtZScpKXtcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NOYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJyk7XHJcbiAgfSBlbHNlIGRvY3VtZW50LmJvZHkuY2xhc3NOYW1lID0gJ21vdW50YWlucyc7XHJcblxyXG4gIGxldCBjaGFuZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhbmdlX19jb250YWluZXInKTtcclxuXHJcbiAgaWYoY2hhbmdlKXtcclxuICAgIGNoYW5nZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBpZihldmVudC50YXJnZXQuY2xvc2VzdCgnLmNoYW5nZV9fdGhlbWUtaXRlbScpKXtcclxuICAgICAgICBsZXQgdmFsdWUgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLmNoYW5nZV9fdGhlbWUtaXRlbScpLmRhdGFzZXQudGhlbWU7XHJcbiAgICAgICAgY29uc29sZS5sb2codmFsdWUpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsdmFsdWUpO1xyXG4gICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgZnVuY3Rpb24gcGFyYWxsYXgoKSB7XG4gICAgbGV0IHBhcmFsbGF4Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhcmFsbGF4LW1vdW50JyksXG4gICAgICBsYXllcnMgPSBwYXJhbGxheENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucGFyYWxsYXgtbW91bnRfX2xheWVyJyk7XG5cbiAgICBsZXQgbW92ZUxheWVyID0gZnVuY3Rpb24oZSl7XG4gICAgICBsZXRcbiAgICAgICAgaW5pdGlhbFggPSAocGFyYWxsYXhDb250YWluZXIuY2xpZW50V2lkdGggLyAyKSAtIGUucGFnZVgsXG4gICAgICAgIGluaXRpYWxZID0gKHBhcmFsbGF4Q29udGFpbmVyLmNsaWVudEhlaWdodCAvIDIpIC0gZS5wYWdlWTtcblxuICAgICAgQXJyYXkuZnJvbShsYXllcnMpLmZvckVhY2goKGxheWVyLGkpID0+IHtcbiAgICAgICAgbGV0XG4gICAgICAgICAgZGV2aWRlciA9IGkgLyAxMDAsXG4gICAgICAgICAgcG9zaXRpb25YID0gaW5pdGlhbFggKiBkZXZpZGVyLFxuICAgICAgICAgIHBvc2l0aW9uWSA9IGluaXRpYWxZICogZGV2aWRlcjtcblxuICAgICAgICBsYXllci5zdHlsZS5ib3R0b20gPSAnLScgKyBwYXJhbGxheENvbnRhaW5lci5jbGllbnRIZWlnaHQgLyAyICogZGV2aWRlciArICdweCc7XG4gICAgICAgIGxheWVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgnICsgcG9zaXRpb25YICsncHgsICcgKyBwb3NpdGlvblkgKydweCwgMCknO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmF1dGgtY29udGFpbmVyJykpIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdXRoLWNvbnRhaW5lcicpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsbW92ZUxheWVyKTtcbiAgICB9IGVsc2UgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm8nKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLG1vdmVMYXllcik7XG59XG5wYXJhbGxheCgpO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBsZXQgcHJlbG9hZGVyID0gKCkgPT4ge1xyXG4gICAgbGV0IHBlcmNlbnRzVG90YWwgPSAwO1xyXG4gICAgbGV0IHByZWxvYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVsb2FkZXInKTtcclxuXHJcbiAgICBsZXQgaW1nUGF0aCA9IEFycmF5LmZyb20oZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcqJykpLmZpbHRlcigoZWwpID0+IHtcclxuICAgICAgaWYoZWwuaGFzQXR0cmlidXRlKCdiYWNrZ3JvdW5kLWltYWdlJykpIHJldHVybiBlbDtcclxuICAgICAgaWYoZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW1nJykgIHJldHVybiBlbDtcclxuICAgIH0pLm1hcCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICBpZihlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnYmFja2dyb3VuZC1pbWFnZScpKSByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2JhY2tncm91bmQtaW1hZ2UnKTtcclxuICAgICAgaWYoZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbWcnKSAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdzcmMnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBzZXRQZXJjZW50ID0gKHRvdGFsLCBjdXJyZW50KSA9PiB7XHJcbiAgICAgIGxldCBwZXJjZW50cyA9IE1hdGguY2VpbChjdXJyZW50L3RvdGFsICogMTAwKTtcclxuICAgICAgcHJlbG9hZGVyLnF1ZXJ5U2VsZWN0b3IoJy5wcmVsb2FkZXJfX3BlcmNlbnRzJykudGV4dENvbnRlbnQgPSBwZXJjZW50cyArICclJztcclxuICAgICAgaWYocGVyY2VudHMgPj0gMTAwKSBwcmVsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH07XHJcblxyXG4gICAgbGV0IGxvYWRJbWFnZXMgPSAoaW1hZ2VzKSA9PiB7XHJcbiAgICAgIGlmKCFpbWFnZXMubGVuZ3RoKSBwcmVsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgaW1hZ2VzLmZvckVhY2goKGltZywgaSwgaW1hZ2VzKSA9PiB7XHJcbiAgICAgICAgbGV0IGZha2VJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgIGZha2VJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsaW1nKTtcclxuICAgICAgICBmYWtlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsKCkgPT4ge1xyXG4gICAgICAgICAgcGVyY2VudHNUb3RhbCsrO1xyXG4gICAgICAgICAgc2V0UGVyY2VudChpbWFnZXMubGVuZ3RoLHBlcmNlbnRzVG90YWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZha2VJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsKCkgPT4ge1xyXG4gICAgICAgICAgcGVyY2VudHNUb3RhbCsrO1xyXG4gICAgICAgICAgc2V0UGVyY2VudChpbWFnZXMubGVuZ3RoLHBlcmNlbnRzVG90YWwpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9O1xyXG4gICAgbG9hZEltYWdlcyhpbWdQYXRoKTtcclxuICB9O1xyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJyxwcmVsb2FkZXIpO1xyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcbiAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpKXtcclxuICAgIGxldCBzbGlkZXIgPSAoKCkgPT4ge1xyXG4gICAgICBsZXQgaW5Qcm9jZXNzID0gZmFsc2U7XHJcbiAgICAgIGxldCBkdXJhdGlvbiA9IDMwMDtcclxuXHJcbiAgICAgIGxldCBoaWRlSXRlbXMgPSAoaXRlbXMsZGlyZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgQXJyYXkuZnJvbShpdGVtcykuZm9yRWFjaCgoZWwpID0+IGVsLnN0eWxlLnRvcCA9IC1kaXJlY3Rpb24gKyAnJScpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgbGV0IG1vdmVTbGlkZXIgPSAoY29udGFpbmVyLGRpcmVjdGlvbixuZXh0UHJldikgPT4ge1xyXG4gICAgICAgIGxldCBpdGVtcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyLWJ0bl9faXRlbScpO1xyXG4gICAgICAgIGxldCB1bkFjdGl2ZUl0ZW1zID0gQXJyYXkuZnJvbShpdGVtcykuZmlsdGVyKChlbCkgPT4gIWVsLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyLWJ0bl9faXRlbS0tYWN0aXZlJykpO1xyXG4gICAgICAgIGxldCBhY3RpdmVJdGVtID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItYnRuX19pdGVtLS1hY3RpdmUnKTtcclxuICAgICAgICBkaXJlY3Rpb24gPSAoZGlyZWN0aW9uID09PSAnZG93bicpID8gMTAwIDogLTEwMDtcclxuXHJcbiAgICAgICAgaGlkZUl0ZW1zKHVuQWN0aXZlSXRlbXMsZGlyZWN0aW9uKTtcclxuXHJcbiAgICAgICAgbGV0IGNvdW50ZXIgPSBBcnJheS5mcm9tKGl0ZW1zKS5maW5kSW5kZXgoKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3NsaWRlci1idG5fX2l0ZW0tLWFjdGl2ZScpKTtcclxuXHJcbiAgICAgICAgaWYobmV4dFByZXYgPT09ICduZXh0Jyl7XHJcbiAgICAgICAgICBjb3VudGVyKys7XHJcbiAgICAgICAgICBpZihjb3VudGVyID49IGl0ZW1zLmxlbmd0aCkgY291bnRlciA9IDA7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgY291bnRlci0tO1xyXG4gICAgICAgICAgaWYoY291bnRlciA8IDApIGNvdW50ZXIgPSBpdGVtcy5sZW5ndGgtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZXFJdGVtID0gaXRlbXNbY291bnRlcl07XHJcbiAgICAgICAgYWN0aXZlSXRlbS5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAnICsgZHVyYXRpb24gKydtcyBsaW5lYXInO1xyXG4gICAgICAgIHJlcUl0ZW0uc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgJyArIGR1cmF0aW9uICsgJ21zIGxpbmVhcic7XHJcbiAgICAgICAgYWN0aXZlSXRlbS5zdHlsZS50b3AgPSBkaXJlY3Rpb24gKyAnJSc7XHJcbiAgICAgICAgcmVxSXRlbS5zdHlsZS50b3AgPSAwO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIGFjdGl2ZUl0ZW0uc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xyXG4gICAgICAgICAgcmVxSXRlbS5zdHlsZS50cmFuc2l0aW9uID0gJyc7XHJcbiAgICAgICAgICBhY3RpdmVJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlci1idG5fX2l0ZW0tLWFjdGl2ZScpO1xyXG4gICAgICAgICAgYWN0aXZlSXRlbS5zdHlsZS50b3AgPSAtZGlyZWN0aW9uICsgJyUnO1xyXG4gICAgICAgICAgcmVxSXRlbS5jbGFzc0xpc3QuYWRkKCdzbGlkZXItYnRuX19pdGVtLS1hY3RpdmUnKTtcclxuICAgICAgICAgIGluUHJvY2VzcyA9IGZhbHNlO1xyXG4gICAgICAgIH0sMzAwKTtcclxuXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBsZXQgbW92ZVNsaWRlU2hvdyA9IChjb250YWluZXIsIGRpcmVjdGlvbikgPT4ge1xyXG4gICAgICAgIGxldCBpdGVtcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVzaG93X19saW5rJyk7XHJcbiAgICAgICAgbGV0IGl0ZW1zSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXJfX2Rlc2MtLWl0ZW0nKTtcclxuICAgICAgICBsZXQgYWN0aXZlSW5kZXggPSBBcnJheS5mcm9tKGl0ZW1zKS5maW5kSW5kZXgoKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3NsaWRlc2hvd19fbGluay0tYWN0aXZlJykpO1xyXG4gICAgICAgIGxldCBhY3RpdmVJdGVtID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXNob3dfX2xpbmstLWFjdGl2ZScpO1xyXG4gICAgICAgIGxldCBhY3RpdmVJdGVtSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2Rlc2MtLWFjdGl2ZScpO1xyXG5cclxuICAgICAgICBpZihkaXJlY3Rpb24gPT09ICduZXh0Jykge1xyXG4gICAgICAgICAgYWN0aXZlSW5kZXgrKztcclxuICAgICAgICAgIGlmKGFjdGl2ZUluZGV4ID49IGl0ZW1zLmxlbmd0aCkgYWN0aXZlSW5kZXggPSAwO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgIGFjdGl2ZUluZGV4LS07XHJcbiAgICAgICAgICBpZihhY3RpdmVJbmRleCA8IDApIGFjdGl2ZUluZGV4ID0gaXRlbXMubGVuZ3RoLTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVxSXRlbSA9IGl0ZW1zW2FjdGl2ZUluZGV4XTtcclxuICAgICAgICBsZXQgcmVxSXRlbUluZm8gPSBpdGVtc0luZm9bYWN0aXZlSW5kZXhdO1xyXG4gICAgICAgIGFjdGl2ZUl0ZW0uc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgYWN0aXZlSXRlbUluZm8uc3R5bGUub3BhY2l0eSA9IDA7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgYWN0aXZlSXRlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgYWN0aXZlSXRlbUluZm8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgIGFjdGl2ZUl0ZW0uc3R5bGUub3BhY2l0eSA9ICcnO1xyXG4gICAgICAgICAgYWN0aXZlSXRlbUluZm8uc3R5bGUub3BhY2l0eSA9ICcnO1xyXG4gICAgICAgICAgYWN0aXZlSXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXNob3dfX2xpbmstLWFjdGl2ZScpO1xyXG4gICAgICAgICAgYWN0aXZlSXRlbUluZm8uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyX19kZXNjLS1hY3RpdmUnKTtcclxuICAgICAgICAgIHJlcUl0ZW0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICByZXFJdGVtSW5mby5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgIHJlcUl0ZW0uY2xhc3NMaXN0LmFkZCgnc2xpZGVzaG93X19saW5rLS1hY3RpdmUnKTtcclxuICAgICAgICAgIHJlcUl0ZW1JbmZvLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9fZGVzYy0tYWN0aXZlJyk7XHJcbiAgICAgICAgfSwgZHVyYXRpb24pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgbGV0IHN0YXJ0U2xpZGVyTmV4dCA9ICgpID0+IHtcclxuICAgICAgICBpZighaW5Qcm9jZXNzKXtcclxuICAgICAgICAgIGluUHJvY2VzcyA9IHRydWU7XHJcbiAgICAgICAgICBtb3ZlU2xpZGVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2J0bi0tbmV4dCcpLCdkb3duJywnbmV4dCcpO1xyXG4gICAgICAgICAgbW92ZVNsaWRlcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19idG4tLXByZXYnKSwndXAnLCAnbmV4dCcpO1xyXG4gICAgICAgICAgbW92ZVNsaWRlU2hvdyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVzaG93X19kaXNwbGF5JyksJ25leHQnKVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxldCBzdGFydFNsaWRlclByZXYgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYoIWluUHJvY2Vzcyl7XHJcbiAgICAgICAgICBpblByb2Nlc3MgPSB0cnVlO1xyXG4gICAgICAgICAgbW92ZVNsaWRlcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19idG4tLW5leHQnKSwndXAnLCdwcmV2Jyk7XHJcbiAgICAgICAgICBtb3ZlU2xpZGVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX2J0bi0tcHJldicpLCdkb3duJywgJ3ByZXYnKTtcclxuICAgICAgICAgIG1vdmVTbGlkZVNob3coZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlc2hvd19fZGlzcGxheScpLCdwcmV2JylcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBsZXQgaW5pdCA9ICgpID0+IHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hhZG93X19uZXh0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHN0YXJ0U2xpZGVyTmV4dCk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fYXJyb3ctLW5leHQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc3RhcnRTbGlkZXJOZXh0KTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hhZG93X19wcmV2JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHN0YXJ0U2xpZGVyUHJldik7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fYXJyb3ctLXByZXYnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc3RhcnRTbGlkZXJQcmV2KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGluaXQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLHNsaWRlcik7XHJcbiAgfVxyXG59KSgpOyIsIlxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGFtYnVyZ2VyJykpe1xyXG4gICAgbGV0IG1lbnVNb2JpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGFtYnVyZ2VyJyk7XHJcblxyXG4gICAgbGV0IG9wZW5NZW51ID0gKCkgPT4ge1xyXG4gICAgICBtZW51TW9iaWxlLmNsYXNzTGlzdC5hZGQoJ2hhbWJ1cmdlcl9fb3BlbmVkJyk7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyxvbkVzY1ByZXNzKTtcclxuICAgICAgbWVudU1vYmlsZS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyxvbkVudGVyUHJlc3MpXHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBjbG9zZU1lbnUgPSAoKSA9PiB7XHJcbiAgICAgIG1lbnVNb2JpbGUuY2xhc3NMaXN0LnJlbW92ZSgnaGFtYnVyZ2VyX19vcGVuZWQnKTtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLG9uRXNjUHJlc3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgb25Fc2NQcmVzcyA9IChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQuY29kZSA9PT0gJ0VzY2FwZScpe1xyXG4gICAgICAgIGNsb3NlTWVudSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBvbkVudGVyUHJlc3MgPSAoKSA9PiB7XHJcbiAgICAgIGlmIChldmVudC5jb2RlID09PSAnRW50ZXInICYmIG1lbnVNb2JpbGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdoYW1idXJnZXJfX29wZW5lZCcpKXtcclxuICAgICAgICBjbG9zZU1lbnUoKTtcclxuICAgICAgfWVsc2UgaWYoZXZlbnQuY29kZSA9PT0gJ0VudGVyJyl7XHJcbiAgICAgICAgb3Blbk1lbnUoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBtZW51TW9iaWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmIChtZW51TW9iaWxlLmNsYXNzTGlzdC5jb250YWlucygnaGFtYnVyZ2VyX19vcGVuZWQnKSkgY2xvc2VNZW51KCk7XHJcbiAgICAgIGVsc2Ugb3Blbk1lbnUoKTtcclxuICAgIH0pO1xyXG4gICAgbWVudU1vYmlsZS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyxvbkVudGVyUHJlc3MpO1xyXG4gIH1cclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG4gIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdXRoJykpe1xyXG4gICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdXRoJyk7XHJcbiAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmF1dGhfX2xvZ2luLS1saW5rJyk7XHJcbiAgICBsZXQgYnV0dG9uU2Vjb25kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmF1dGhfX2J0bi0tYmFjaycpO1xyXG5cclxuICAgIGxldCBkb1RvZ2dsZSA9IChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoJ2F1dGhfX2ZsaXAnKTtcclxuICAgIH07XHJcblxyXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxkb1RvZ2dsZSk7XHJcbiAgICBidXR0b25TZWNvbmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGRvVG9nZ2xlKTtcclxuICB9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2tpbGxzJykpe1xyXG4gICAgbGV0IGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYW5pbWF0aW9uXScpO1xyXG5cclxuICAgIGxldCBzdGFydEFuaW1hdGUgPSAoKSA9PiB7XHJcbiAgICAgIEFycmF5LmZyb20oaXRlbXMpLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgICAgaWYoKGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnkgLSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgMzApIDwgMCl7XHJcbiAgICAgICAgICBsZXQgY2xhc3NOYW1lID0gZWwuZGF0YXNldC5hbmltYXRpb247XHJcbiAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgbGV0IGFuaW1hdGVDU1MgPSAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsc3RhcnRBbmltYXRlKTtcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLHN0YXJ0QW5pbWF0ZSk7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsc3RhcnRBbmltYXRlKTtcclxuICAgIH07XHJcbiAgICBhbmltYXRlQ1NTKCk7XHJcbiAgfVxyXG59KSgpOyJdfQ==
